var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,l;function c(e,n,i){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(n,i))}function a(t){let e=!1;return function(...n){e||(e=!0,t.call(this,...n))}}function u(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function $(){return h(" ")}function b(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function g(t){return function(e){return e.preventDefault(),t.call(this,e)}}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function y(t,e,n){t.classList[n?"add":"remove"](e)}class I{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var i;this.e||(this.is_svg?this.e=(i=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",i)):this.e=m(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)d(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(f)}}function k(t){l=t}function A(){const t=function(){if(!l)throw new Error("Function called outside component initialization");return l}();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}(e,n,{cancelable:i});return r.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function w(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const E=[],_=[],M=[],T=[],C=Promise.resolve();let B=!1;function F(t){M.push(t)}const N=new Set;let P=0;function L(){if(0!==P)return;const t=l;do{try{for(;P<E.length;){const t=E[P];P++,k(t),D(t.$$)}}catch(t){throw E.length=0,P=0,t}for(k(null),E.length=0,P=0;_.length;)_.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];N.has(e)||(N.add(e),e())}M.length=0}while(E.length);for(;T.length;)T.pop()();B=!1,N.clear(),k(t)}function D(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}const j=new Set;let H;function q(t,e){t&&t.i&&(j.delete(t),t.i(e))}function O(t,e,n,i){if(t&&t.o){if(j.has(t))return;j.add(t),H.c.push((()=>{j.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}else i&&i()}function S(t){t&&t.c()}function z(t,n,o,s){const{fragment:l,after_update:c}=t.$$;l&&l.m(n,o),s||F((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):i(n),t.$$.on_mount=[]})),c.forEach(F)}function Q(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(E.push(t),B||(B=!0,C.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(e,r,o,s,c,a,u,d=[-1]){const m=l;k(e);const h=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(m?m.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||m.$$.root};u&&u(h.root);let $=!1;if(h.ctx=o?o(e,r.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&c(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),$&&G(e,t)),n})):[],h.update(),$=!0,i(h.before_update),h.fragment=!!s&&s(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(f)}else h.fragment&&h.fragment.c();r.intro&&q(e.$$.fragment),z(e,r.target,r.anchor,r.customElement),L()}k(m)}class Y{$destroy(){Q(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J=[];function K(e,n=t){let i;const r=new Set;function s(t){if(o(e,t)&&(e=t,i)){const t=!J.length;for(const t of r)t[1](),J.push(t,e);if(t){for(let t=0;t<J.length;t+=2)J[t][0](J[t+1]);J.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,l=t){const c=[o,l];return r.add(c),1===r.size&&(i=n(s)||t),o(e),()=>{r.delete(c),0===r.size&&(i(),i=null)}}}}const U=K(0),V=K(0),W=K(0),X=K(0),Z=K(0),tt=K(),et=K(!1),nt=K(!1),it=K([]);let rt,ot=[],st=[],lt=[];function ct(t){let e=ot;return t%rt!=0&&(e=e.concat(st)),t%rt!=rt-1&&(e=e.concat(lt)),e}function at(e){let n,i,r,o;return{c(){n=m("div"),i=new I(!1),r=$(),o=h(e[0]),i.a=r,p(n,"id","FlagsCount"),p(n,"class","svelte-1jy9a1b")},m(t,e){d(t,n,e),i.m(ut,n),u(n,r),u(n,o)},p(t,[e]){1&e&&v(o,t[0])},i:t,o:t,d(t){t&&f(n)}}}Z.subscribe((t=>{rt=t,ot=[-1*rt,rt],st=[-1*rt-1,-1,rt-1],lt=[rt+1,1,-1*rt+1]}));const ut="&#128681;";function dt(t,e,n){let i;return c(t,W,(t=>n(0,i=t))),[i]}class ft extends Y{constructor(t){super(),R(this,t,dt,at,o,{})}}function mt(e){let n,i,r,o;return{c(){n=m("div"),i=new I(!1),r=$(),o=h(e[0]),i.a=r,p(n,"id","Timer"),p(n,"class","svelte-h2a3qn")},m(t,e){d(t,n,e),i.m(ht,n),u(n,r),u(n,o)},p(t,[e]){1&e&&v(o,t[0])},i:t,o:t,d(t){t&&f(n)}}}const ht="&#9201;";function $t(t,e,n){let i;return c(t,U,(t=>n(0,i=t))),[i]}class bt extends Y{constructor(t){super(),R(this,t,$t,mt,o,{})}}function gt(e){let n,r,o,s,l,c,a,g,I,k,A,w,E;return{c(){n=m("div"),r=m("p"),o=$(),s=m("p"),l=$(),c=m("p"),c.textContent="?",a=$(),g=m("p"),I=h(e[5]),k=$(),A=m("button"),p(r,"class","svelte-15bymlb"),y(r,"clicked",!e[3]),y(r,"hideBomb",e[1]),p(s,"class","svelte-15bymlb"),y(s,"hideFlag",e[4]),x(c,"font-size","22px"),p(c,"class","svelte-15bymlb"),y(c,"hideQuestionMark",e[7]),x(g,"color","rgb("+(105+35*e[5])+", "+(255-50*e[5])+", 0)"),p(g,"class","svelte-15bymlb"),y(g,"clicked",!e[3]),y(g,"hideNumber",0===e[5]||!e[1]),p(A,"class","svelte-15bymlb"),y(A,"clicked",e[3]),y(A,"unmarked",!e[8][e[0]]),y(A,"marked",e[8][e[0]]),y(A,"gameFinished",e[2]||0===e[9]),p(n,"class","Field svelte-15bymlb"),x(n,"background","rgb("+e[0]%2*50+", "+e[0]%2*50+", "+e[0]%2*50+")")},m(t,i){d(t,n,i),u(n,r),r.innerHTML=pt,u(n,o),u(n,s),s.innerHTML=vt,u(n,l),u(n,c),u(n,a),u(n,g),u(g,I),u(n,k),u(n,A),w||(E=[b(A,"click",e[10]),b(A,"contextmenu",e[11]),b(n,"mousedown",e[17]),b(n,"click",e[18]),b(n,"contextmenu",e[19]),b(n,"mouseleave",e[20])],w=!0)},p(t,[e]){8&e&&y(r,"clicked",!t[3]),2&e&&y(r,"hideBomb",t[1]),16&e&&y(s,"hideFlag",t[4]),128&e&&y(c,"hideQuestionMark",t[7]),32&e&&v(I,t[5]),32&e&&x(g,"color","rgb("+(105+35*t[5])+", "+(255-50*t[5])+", 0)"),8&e&&y(g,"clicked",!t[3]),34&e&&y(g,"hideNumber",0===t[5]||!t[1]),8&e&&y(A,"clicked",t[3]),257&e&&y(A,"unmarked",!t[8][t[0]]),257&e&&y(A,"marked",t[8][t[0]]),516&e&&y(A,"gameFinished",t[2]||0===t[9]),1&e&&x(n,"background","rgb("+t[0]%2*50+", "+t[0]%2*50+", "+t[0]%2*50+")")},i:t,o:t,d(t){t&&f(n),w=!1,i(E)}}}const pt="&#128163;",vt="&#128681;";function xt(t,e,n){let i,r,o;c(t,nt,(t=>n(16,i=t))),c(t,it,(t=>n(8,r=t))),c(t,tt,(t=>n(9,o=t)));const s=A();let{tileAtIndexIsClicked:l}=e,{bombPlacements:a}=e,{tileAtIndexIsFlagged:u}=e,{tileAtIndexIsMarked:d}=e,{tileIndex:f}=e,{hideBomb:m=!1}=e,{bombsDetonated:h=!1}=e,$=!1,b=!0,g=!0,p=0,v=0;function x(){m?(s("updateTimer",{timer:"start"}),0===p&&s("revealNeighbours",{index:f})):s("gameOver")}return t.$$set=t=>{"tileAtIndexIsClicked"in t&&n(12,l=t.tileAtIndexIsClicked),"bombPlacements"in t&&n(15,a=t.bombPlacements),"tileAtIndexIsFlagged"in t&&n(13,u=t.tileAtIndexIsFlagged),"tileAtIndexIsMarked"in t&&n(14,d=t.tileAtIndexIsMarked),"tileIndex"in t&&n(0,f=t.tileIndex),"hideBomb"in t&&n(1,m=t.hideBomb),"bombsDetonated"in t&&n(2,h=t.bombsDetonated)},t.$$.update=()=>{if(65536&t.$$.dirty&&i&&!1!==a[f]&&ct(f).forEach((t=>{!1===a[f+t]&&n(5,p++,p)})),6&t.$$.dirty&&h&&(m||(n(4,b=!0),n(3,$=!0))),4123&t.$$.dirty&&l[f]&&b&&!$&&(n(3,$=!0),m&&tt.update((t=>t-1)),setTimeout(x)),24681&t.$$.dirty)if(2===v&&$){let t=0;ct(f).forEach((e=>{u[f+e]&&t++})),t>=p&&0!==p?s("revealNeighbours",{index:f}):(ct(f).forEach((t=>{n(14,d[f+t]=!0,d)})),it.set(d))}else ct(f).forEach((t=>{n(14,d[f+t]=!1,d)})),it.set(d)},[f,m,h,$,b,p,v,g,r,o,function(){b&&g&&(s("layBombs",{index:f}),n(12,l[f]=!0,l))},function(){b&&g?(W.update((t=>t-1)),n(13,u[f]=!0,u),n(4,b=!1)):!b&&g?(n(4,b=!0),n(7,g=!1)):(W.update((t=>t+1)),n(13,u[f]=!1,u),n(7,g=!0))},l,u,d,a,i,()=>n(6,v++,v),()=>n(6,v=0),()=>n(6,v=0),()=>n(6,v=0)]}class yt extends Y{constructor(t){super(),R(this,t,xt,gt,o,{tileAtIndexIsClicked:12,bombPlacements:15,tileAtIndexIsFlagged:13,tileAtIndexIsMarked:14,tileIndex:0,hideBomb:1,bombsDetonated:2})}}function It(t,e,n){const i=t.slice();return i[16]=e[n],i[18]=n,i}function kt(t){let e,n;return e=new yt({props:{hideBomb:t[16],bombPlacements:t[0],tileIndex:t[18],bombsDetonated:t[4],tileAtIndexIsClicked:t[1],tileAtIndexIsFlagged:t[2],tileAtIndexIsMarked:t[3]}}),e.$on("updateTimer",t[12]),e.$on("layBombs",a(t[6])),e.$on("gameOver",a(t[7])),e.$on("revealNeighbours",t[8]),{c(){S(e.$$.fragment)},m(t,i){z(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.hideBomb=t[16]),1&n&&(i.bombPlacements=t[0]),16&n&&(i.bombsDetonated=t[4]),2&n&&(i.tileAtIndexIsClicked=t[1]),4&n&&(i.tileAtIndexIsFlagged=t[2]),8&n&&(i.tileAtIndexIsMarked=t[3]),e.$set(i)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function At(t){let e,n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=kt(It(t,r,e));const s=t=>O(o[t],1,1,(()=>{o[t]=null}));return{c(){e=m("div");for(let t=0;t<o.length;t+=1)o[t].c();p(e,"id","MinesField"),x(e,"grid-template-columns","repeat("+t[5]+", auto)"),p(e,"class","svelte-1wf1wqr")},m(t,i){d(t,e,i);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[l]){if(479&l){let n;for(r=t[0],n=0;n<r.length;n+=1){const i=It(t,r,n);o[n]?(o[n].p(i,l),q(o[n],1)):(o[n]=kt(i),o[n].c(),q(o[n],1),o[n].m(e,null))}for(H={r:0,c:[],p:H},n=r.length;n<o.length;n+=1)s(n);H.r||i(H.c),H=H.p}(!n||32&l)&&x(e,"grid-template-columns","repeat("+t[5]+", auto)")},i(t){if(!n){for(let t=0;t<r.length;t+=1)q(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)O(o[t]);n=!1},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t)}}}function wt(t,e,n){let i,r,o,s;c(t,V,(t=>n(14,i=t))),c(t,X,(t=>n(10,r=t))),c(t,et,(t=>n(11,o=t))),c(t,Z,(t=>n(5,s=t)));let l=[],a=[],u=[],d=[],f=!1,m=!1,h=!1;const $=A();return t.$$.update=()=>{3584&t.$$.dirty&&o&&(m||(n(0,l=Array(r).fill(!0)),n(1,a=Array(r).fill(!1)),n(2,u=Array(r).fill(!1)),n(3,d=Array(r).fill(!1)),n(9,m=!0)))},[l,a,u,d,f,s,function(t){if(!h){n(0,l=Array(r).fill(!0));for(let e=0;e<i;e++){let e=Math.floor(Math.random()*l.length);for(;!l[e]||e===t.detail.index||ct(t.detail.index).map((e=>e+t.detail.index)).includes(e);)e=Math.floor(Math.random()*l.length);n(0,l[e]=!1,l)}nt.set(!0),h=!0}},function(){$("updateTimer",{timer:"stop"}),f||(n(4,f=!0),setTimeout((()=>alert("Game over! Please reload the page.")),10))},function(t){ct(t.detail.index).forEach((e=>{!1!==a[t.detail.index+e]||u[t.detail.index+e]||setTimeout((()=>n(1,a[t.detail.index+e]=!0,a)),25)}))},m,r,o,function(e){w.call(this,t,e)}]}class Et extends Y{constructor(t){super(),R(this,t,wt,At,o,{})}}function _t(e){let n,i,r,o;return{c(){n=m("button"),i=m("p"),p(i,"class","svelte-88721u"),p(n,"id","ResetButton"),p(n,"class","svelte-88721u")},m(t,s){d(t,n,s),u(n,i),i.innerHTML=Mt,r||(o=b(n,"click",e[0]),r=!0)},p:t,i:t,o:t,d(t){t&&f(n),r=!1,o()}}}const Mt="&#128472;";function Tt(t){return[()=>{location.reload()}]}class Ct extends Y{constructor(t){super(),R(this,t,Tt,_t,o,{})}}function Bt(t){let e,n,i,r,o,s,l,c,a,h,v,y;return i=new ft({}),o=new Ct({}),l=new bt({}),a=new Et({}),a.$on("updateTimer",t[1]),{c(){e=m("div"),n=m("div"),S(i.$$.fragment),r=$(),S(o.$$.fragment),s=$(),S(l.$$.fragment),c=$(),S(a.$$.fragment),p(n,"id","statistics"),p(n,"class","svelte-1bmo594"),p(e,"id","userInterface"),x(e,"visibility",t[0]),p(e,"class","svelte-1bmo594")},m(f,m){d(f,e,m),u(e,n),z(i,n,null),u(n,r),z(o,n,null),u(n,s),z(l,n,null),u(e,c),z(a,e,null),h=!0,v||(y=b(e,"contextmenu",g(t[5])),v=!0)},p(t,[n]){(!h||1&n)&&x(e,"visibility",t[0])},i(t){h||(q(i.$$.fragment,t),q(o.$$.fragment,t),q(l.$$.fragment,t),q(a.$$.fragment,t),h=!0)},o(t){O(i.$$.fragment,t),O(o.$$.fragment,t),O(l.$$.fragment,t),O(a.$$.fragment,t),h=!1},d(t){t&&f(e),Q(i),Q(o),Q(l),Q(a),v=!1,y()}}}function Ft(t,e,n){let i,r;c(t,tt,(t=>n(3,i=t))),c(t,et,(t=>n(4,r=t)));let o,s="hidden",l=!1;return t.$$.update=()=>{16&t.$$.dirty&&r&&n(0,s="visible"),12&t.$$.dirty&&0===i&&(clearInterval(o),setTimeout((()=>alert("You won!")),10))},[s,function(t){"start"!==t.detail.timer||l?"stop"===t.detail.timer&&clearInterval(o):(n(2,o=setInterval((()=>U.update((t=>t+1))),1e3)),l=!0)},o,i,r,function(e){w.call(this,t,e)}]}class Nt extends Y{constructor(t){super(),R(this,t,Ft,Bt,o,{})}}function Pt(e){let n,r,o,s,l,c,a,h,v,y,I;return{c(){n=m("div"),r=m("div"),r.innerHTML="<h1>Select a difficulty level</h1>",o=$(),s=m("div"),l=m("button"),l.textContent="Easy",c=$(),a=m("button"),a.textContent="Medium",h=$(),v=m("button"),v.textContent="Hard",p(r,"id","headline"),p(r,"class","svelte-5r93dv"),p(l,"id","easy"),p(l,"class","svelte-5r93dv"),p(a,"id","medium"),p(a,"class","svelte-5r93dv"),p(v,"id","hard"),p(v,"class","svelte-5r93dv"),p(s,"id","buttons"),p(s,"class","svelte-5r93dv"),p(n,"id","difficultyPopup"),x(n,"visibility",e[0]),p(n,"class","svelte-5r93dv")},m(t,i){d(t,n,i),u(n,r),u(n,o),u(n,s),u(s,l),u(s,c),u(s,a),u(s,h),u(s,v),y||(I=[b(l,"click",e[3]),b(a,"click",e[4]),b(v,"click",e[5]),b(n,"contextmenu",g(e[2]))],y=!0)},p(t,[e]){1&e&&x(n,"visibility",t[0])},i:t,o:t,d(t){t&&f(n),y=!1,i(I)}}}function Lt(t,e,n){let i="visible";function r(t,e,r){Z.set(t),X.set(e),W.set(r),V.set(r),tt.set(e-r),it.set(Array(e).fill(!1)),et.set(!0),n(0,i="hidden")}return[i,r,function(e){w.call(this,t,e)},()=>r(9,81,10),()=>r(19,266,40),()=>r(27,486,99)]}class Dt extends Y{constructor(t){super(),R(this,t,Lt,Pt,o,{})}}function jt(e){let n,i,r,o,l,c,a,h;return i=new Dt({}),o=new Nt({}),{c(){var t,e;n=m("main"),S(i.$$.fragment),r=$(),S(o.$$.fragment),l=$(),c=m("img"),t=c.src,e=a="bobomb.png",s||(s=document.createElement("a")),s.href=e,t!==s.href&&p(c,"src","bobomb.png"),p(c,"alt","A bomb."),p(c,"class","svelte-ovrsqj"),p(n,"class","svelte-ovrsqj")},m(t,e){d(t,n,e),z(i,n,null),u(n,r),z(o,n,null),u(n,l),u(n,c),h=!0},p:t,i(t){h||(q(i.$$.fragment,t),q(o.$$.fragment,t),h=!0)},o(t){O(i.$$.fragment,t),O(o.$$.fragment,t),h=!1},d(t){t&&f(n),Q(i),Q(o)}}}return new class extends Y{constructor(t){super(),R(this,t,null,jt,o,{})}}({target:document.getElementById("app")})}();
//# sourceMappingURL=bundle.js.map
